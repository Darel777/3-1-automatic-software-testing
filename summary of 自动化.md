# 自动化测试期末复习

10个选择题（30分）

4个简答题（25分）

3个计算题

- 测试用例优先级或排序
- 用基本测试思想写，写几个蜕变规则，测试用例
- 设计一个模糊测试 传统或者是AI

## 1. 源码测试

### 1.1 随机测试

<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210281439063.png" alt="随机测试" style="zoom:30%;" />

### 1.2 变异测试

![变异测试](https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210281440653.png)

### 1.3 差分测试

![差分测试](https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210281440263.png)

### 1.4 蜕变测试

![蜕变测试](https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210281440994.png)

### 1.5 测试用例优先级（TCP）

定义：通过设定特定优先级准则（执行时间，代码覆盖等），对测试用例进行优先级排序以优化其执行次序，旨在最大化优先级目标，例如最大化测试用例集的早期缺陷检测速率

优先级策略

- 基于贪心的TCP策略（重点，其他应该不会考的）
- 基于相似性的TCP策略
- 基于搜索的TCP策略
- 基于机器学习的TCP策略

#### 基于贪心的TCP

- 全局贪心策略

  - 每轮优先挑选覆盖最多代码单元的测试用例

  - 多个用例相同随机选择

- 增量贪心策略

  - 每轮优先挑选覆盖最多，且**未被已选择用例覆盖代码**单元的测试用例
  - 所有代码单元均已被覆盖则重置优先级排序过程
  - 多个用例相同随机选择

![截屏2022-10-28 20.40.18](https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210282040381.png)

计算过程

<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210282042181.png" alt="截屏2022-10-28 20.41.54" style="zoom: 43%;" />

1. 初始化覆盖矩阵和语句覆盖数组，所有代码单元均未被覆盖，c为全0数组

2. 根据覆盖矩阵和单元覆盖数组，计算待排序用例覆盖值，选择测试用例

3. 选择测试用例 ，更新语句覆盖数组，以及待排序测试用例覆盖值

...... 重复上述步骤，当所有语句均被覆盖时，重置语句覆盖数组， 计算剩余测试用例覆盖值

假设有个测试用例以及𝑚个代码单元，共需排序𝑛轮，每轮选择一个测试用例，第𝑘轮时，存在𝑛 − 𝑘 + 1个待排序用例， 每个用例需与𝑚个代码单元计算情况， 那么时间复杂度为$𝑂(𝑛^2𝑚)$

#### 基于相似性的TCP

自适应随机策略：每轮优先与已选择测试用例集差异性最大的测试用例。让测试用例均匀地分布在输入域中。

执行步骤：

<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210282115181.png" alt="截屏2022-10-28 21.14.48" style="zoom:33%;" />

<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210282115744.png" alt="截屏2022-10-28 21.14.56" style="zoom:33%;" />

![截屏2022-10-29 14.42.09](https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210291442695.png)

#### 基于搜索的TCP策略

探索用例优先级排序组合的状态空间，以此找到检测错误更快的用例序列

<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210291457041.png" alt="截屏2022-10-29 14.57.10" style="zoom:43%;" />

#### 基于机器学习的TCP策略

对测试用例特征进行学习，根据预测的缺陷检测概率进行优先级排序。

![截屏2022-10-29 14.56.08](https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210291456631.png)



#### APFD计算

![截屏2022-10-29 09.30.35](https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210290930604.png)

![截屏2022-10-29 09.30.59](https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210290931072.png)

### 1.6 测试用例选择（TCS）

定义：旨在从已有测试用例集中选择出所有可检测代码修改的测试用例

适用场景：适用于因测试预算不足以致不能执行完所有测试用例的测试场景

![截屏2022-10-29 09.40.20](https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210290940934.png)

根据不同的选取策略，测试用例选择可大致分为以下四类

- 最小化测试用例选择技术

  ![截屏2022-10-29 14.16.37](https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210291416531.png)

- 安全测试用例选择技术

  ![截屏2022-10-29 14.17.01](https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210291417241.png)

- 基于数据流和覆盖的测试用例选择技术

  ![截屏2022-10-29 14.17.24](https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210291417800.png)

- 特制/随机测试用例选择技术![截屏2022-10-29 14.17.47](https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210291418745.png)

  

基于程序分析的测试选择

![截屏2022-10-29 09.56.20](https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210290956910.png)

- 变更分析：确定发生变更的生产代码，获取变更信息
- 依赖分析：分析代码中存在的依赖关系，获取测试依赖
- 测试筛选：根据变更信息和测试依赖，筛选出受变更影响的测试方法

![截屏2022-10-29 09.58.46](https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210290958313.png)

![截屏2022-10-29 14.19.01](https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210291419121.png)

类防火墙算法：所有能够通过继承边或使用边直接或间接到达某些发生变更类型的类型的集合

![截屏2022-10-29 10.02.45](https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210291002637.png)

![截屏2022-10-29 10.31.52](https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210291032344.png)

### 1.7 TCP和TCS的对比

测试用例选择：通过分析代码修改，从已有测试用例中选择出所有可检测代码修改的测试用例，并确保未被选择的测试用例在修改前后程序上的执行行为保持一致

测试用例优先级：当测试预算不足以执行完所有测试用例时，基于特定的优先级准则，对测试用例进行优先级排序，以优化其执行次序，旨在最大化优先级目标



## 2. 基于图像理解的移动应用自动化测试

> 把大概的流程描述清楚，就随便任意一个流程就行了，不管是回放，还是说我要去做自动的这样一个探索，自动的深度遍历或者是其他都可以

移动应用自动化测试的难点：

![截屏2022-10-29 10.35.23](https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210291035109.png)

录制回放的可能性：尽管在某些具体推荐内容、地址栏等地方不一致，但整体布局和功能上是相似的

![截屏2022-10-29 10.34.24](https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210291034211.png)

脚本录制与回放的基本框架

![截屏2022-10-29 10.37.46](https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210291037141.png)

跨平台的脚本结构

![截屏2022-10-29 10.41.15](https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210291041615.png)

![截屏2022-10-29 11.04.47](https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210291104166.png)

![截屏2022-10-29 11.05.11](https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210291105288.png)

脚本的回放

- 图像的特征比对

![截屏2022-10-29 11.07.14](https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210291107104.png)

- 布局刻画

![截屏2022-10-29 11.09.07](https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210291109616.png)

- 坐标校正

![截屏2022-10-29 11.09.28](https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210291109422.png)

## 3. 基于群智协同的众包测试

### 3.1 众包测试流程

![截屏2022-10-28 14.47.04](https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210281447949.png)

### 3.2 众包测试面临的挑战

众包测试的优势

- 更充分的测试时间
- 更广泛的测试方法
- 更多样的测试环境
- 更全面的测试方法

众包测试面临的挑战

- 任务分配
- 任务奖励
- 众测过程引导
- 测试报告质量控制

### 3.3 解决办法

协作式众包测试

![截屏2022-10-28 15.07.55](https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210281508996.png)

众测报告质量优化方法：文本和图像处理方法

- 众测报告聚合
  - Aggregator：对所有的测试报告做聚类，将相同的或相似的测试报告聚为同类。
  - Summarizer：对每一类测试报告做整合，将其中的相关信息以可视化的方式最大化的呈现给开发者。
- 众测报告排序
- 深度众测报告排序
- 众测报告半监督聚类
- 众测报告一致性检测

## 4. AI测试概述

### 4.1 与传统测试的区别

任务目标难以精确表达

非确定性开放环境运行

应用于复杂软硬件场景

输出的结果具有一定的随机性，AI测试的输出的结果与训练集的输入数据是非常相关的；而传统软件测试往往是有一个先验条件的，确定的输入能得到一个确定的输出

对于同一个输入AI可能会输出不同的结果

全程黑箱，难以确定测试的结果到底是不是对的

### 4.2 测试的难点

- 数据获取：对模型的训练和验证都需要大量的数据，如何获取到数据是一个最基本的问题。
- 数据质量：一般来说，数据质量越高，训练出的模型预测效果越好，如何评价和保障数据质量，是模型测试的另一个难点
- 特征质量：特征直接影响到了模型的预测效果。特征维数过多，模型可能会过拟合；特征过少，模型可能会欠拟合
- 结果验证：由于模型训练是黑盒形式，无法确认输入对应输出的逻辑是否准确
- 线上服务效果验证：模型的测试不仅仅存在于上线前，随着时间的变化，模型的预测效果可能会出现偏差。如何实时跟踪这些变化，保证服务正常，也是需要关注的重点
- 不充分测试

### 4.3 图像扩增

扩增之后的数据要有标签

- 基于图像处理的数据扩增
  - 基于几何变换的扩增方法
    - 旋转、缩放、平移、翻转、裁剪
  - 颜色空间变换：可以消除光照、亮度及色彩差异
    - 亮度调整、对比度饱和度调整、颜色空间变换、色彩调整
  - 添加噪声和滤波
    - 注入高斯噪声、椒盐噪声等；滤波：模糊、锐化等
  - 图像混合
  - 随机擦除
- 基于深度学习的数据扩增
  - 基于GAN的数据增强 (GAN-based Data Augmentation)：使用GAN生成模型来生成更多的数据，可用作解决类别不平衡问题的过采样技术
  - 神经风格转换 (Neural Style Transfer）：通过神经网络风格迁移来生成不同风格的数据，防止模型过拟合
  - AutoAugment

文本扩增（重点上没有，但是他上课的时候突然提了一嘴）

- EAD（同义词替换、随机插入、随机替换、随机删除）以及回译
- 受限变分自编码器（Conditional Variational Auto-Encoders，CVAE），他是通过在回译的中间过程增加一些噪声，但增加过程很可能导致标签的变化，因此使用CVAE来同时考虑标签和文本来丰富中间过程的语言，最后可以翻译成原来的语言
- 文本生成、对抗生成
- 条件生成（Contextual Augment）：使用模型判断可以替换的位置，然后再生成可以替换的词语

![截屏2022-10-29 16.33.39](https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210291633551.png)

### 4.4 公平性

https://blog.csdn.net/aizhushou/article/details/108724150

机器学习训练在涉及到性别、种族等与人相关的敏感属性时，常常会由于统计性偏差、算法本身甚至是人为偏见而引入歧视性行为。由此，为消除差别影响，改进机器学习公平性，主要途径包括提高训练数据集质量、改进算法降低对敏感属性的依赖以及定义指标量化和衡量歧视程度。

### 4.5 后门攻击

https://zhuanlan.zhihu.com/p/541578519

深度学习中的后门攻击通过后门模型学习攻击者选择的子任务和(良性)主任务的方式向DL模型植入后门：

- 一方面，对于不包含触发器的输入input，后门模型表现得与干净模型一样正常，因此仅通过检查测试样本的测试准确性来区分后门模型和干净模型是不可能的；
- 另一方面，一旦秘密触发器Trigger（只有攻击者知道）出现在输入中，后门模型就会被错误引导去执行攻击者的子任务，比如分类任务中将输入分类到攻击者指定的目标类别。

## 5. 模糊测试

背景：测试的局限性

- 输入空间庞大，无法穷举所有测试用例
- 实现逻辑复杂，无法覆盖所有场景
- 测试语言未知，无法判定测试的预期输出

模糊测试是一种通过向目标程序提供非预期的输入并监视异常结果来发现软件漏洞的方法

- 大数定律的典型应用：通过随机生成测试数据，只要测试次数足够多，概率低的偶然事件就会发生

模糊测试流程

<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210291557059.png" alt="截屏2022-10-29 15.57.17" style="zoom: 60%;" />

![截屏2022-10-29 16.03.24](https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210291603566.png)

![截屏2022-10-29 16.03.14](https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210291603057.png)

模糊测试监测内容：程序中的哪些现象能够帮助判断是否存在问题

- 断言失败
- 异常崩溃
- 无效输入
- 错误输出

基于灰盒的模糊测试流程举例

![截屏2022-10-29 16.06.05](https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210291606807.png)

- 初始种子：已有的测试用例或者已知的符合所要测试程序输入范围的数据 
- 预处理：种子经过一定的预处理（比如编码转换或图像裁剪）使得种子满足程序的输入条件或参数要求
- 由于对测试用例数量和质量的要求，一边会将种子打包形成语料集
- 种子采样根据模糊测试变异方法从送入过程引导的语料集中形成符合变异方法输入的种子元组
- 能量函数旨在通过对语料集进行变异成功率检测实现在同样的测试计算资源尽可能生成多的能够成功变异的测试数据 
- 数据变异根据所选用的变异方法，对选取的原始测试数据施加扰动，生成新的测试输入

AI模糊测试流程与上图一样

- 结果反馈和结果分析都由深度学习模型提供
- 模型同时指导语料集的维护

（我也不知道这是啥，随便看看吧，已经麻木了）

![截屏2022-10-29 16.44.59](https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202210291645049.png)
